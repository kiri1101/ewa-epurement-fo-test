import{_ as U}from"./DRYY3jEA.js";import j from"./B2qQnUa7.js";import{g as A,o as i,w as _,j as F,k as I,l as q,m as D,r as m,u as H,n as O,p as z,c as u,a as n,t as s,d as b,b as r,q as $,h as t,s as w,v as G}from"./B5jmmgch.js";import{u as J,_ as K}from"./DdbQpEcR.js";import{_ as Q}from"./BqGDQiMU.js";import W from"./DhbIgADN.js";import"./BXm-dGCd.js";import"./sPKYO-qt.js";import"./B7Gih5hX.js";import"./mIU_V9T5.js";import"./BybXUGIc.js";import"./SczUJWWo.js";const X={__name:"InputAddonTransparent",setup(V){const f={root:{class:"h-9 bg-input cursor-pointer"}};return(g,k)=>{const h=j;return i(),A(h,{pt:f},{default:_(()=>[F(g.$slots,"default")]),_:3})}}},Y={class:"mx-auto w-92"},Z={class:"pb-4 text-3xl font-bold text-center underline decoration-auth-form-title-decoration decoration-2 underline-offset-10 text-auth-text-primary"},ee={class:"font-semibold"},te={key:0,class:"text-xs text-validation-error font-semibold transition duration-200 ease-linear"},oe={key:0,class:"text-xs text-validation-error font-semibold transition duration-200 ease-linear"},ne={class:"text-sm text-center underline decoration-link-decoration hover:decoration-link-hover-decoration decoration-1 underline-offset-4 text-link hover:text-link-hover"},ge=I({__name:"signin",setup(V){const f=O(),{$apiFetch:g,$loginUser:k}=q(),{t:h,locale:C}=D(),c=m(!1),v=m(!1),{e:N}=J(),a=m({username:"",secret:""}),l=m({username:"",secret:"",lang:C.value});H({title:`${h("meta.title.login")} - ${f.public.app.name}`,meta:[{name:"description",content:"My design project application."}]});const B=z(()=>c.value?"text":"password"),S=()=>c.value=!0,T=()=>c.value=!1,E=()=>v.value=!0,P=()=>v.value=!1,L=async()=>{E();try{const{apiResponse:e,errResponse:p,validError:d}=await g("/api/auth/login",{method:"POST",body:l.value});if(d!==null?d.forEach(o=>{a.value[o?.name]=o?.message}):a.value={username:"",secret:""},e){let o;if(String(e.pesake.code).trim().length>0)o=N(e.pesake.detail);else{k(e.data);const x=e.data.is_first_login?"/auth/forgot-password":"/dashboard";o=G(x)}return o}}catch{}finally{P()}};return(e,p)=>{const d=U,o=X,x=W,M=K,R=Q;return i(),u("div",Y,[n("h2",Z,s(e.$t("page.login.form_title")),1),n("p",null,[b(s(e.$t("page.login.intro_msg.part1"))+" ",1),n("span",ee,s(e.$t("page.login.intro_msg.part2")),1),b(" "+s(e.$t("page.login.intro_msg.part3")),1)]),n("form",{onSubmit:w(L,["prevent"]),class:"mt-4 space-y-4"},[n("div",null,[r(d,{identifier:"pseudo",modelValue:t(l).username,"onUpdate:modelValue":p[0]||(p[0]=y=>t(l).username=y),placeholder:e.$t("placeholder.pseudo")},null,8,["modelValue","placeholder"]),t(a).username.trim().length>0?(i(),u("span",te,s(t(a).username),1)):$("",!0)]),n("div",null,[r(x,null,{default:_(()=>[r(d,{identifier:"password",modelValue:t(l).secret,"onUpdate:modelValue":p[1]||(p[1]=y=>t(l).secret=y),type:t(B),placeholder:"********"},null,8,["modelValue","type"]),r(o,null,{default:_(()=>[t(c)?(i(),u("i",{key:0,onClick:w(T,["prevent"]),class:"text-input-pwd-svg pi pi-eye"})):(i(),u("i",{key:1,onClick:w(S,["prevent"]),class:"text-input-pwd-svg pi pi-eye-slash"}))]),_:1})]),_:1}),t(a).secret.trim().length>0?(i(),u("span",oe,s(t(a).secret),1)):$("",!0)]),r(M,{type:"submit",label:e.$t("button.login"),loading:t(v)},null,8,["label","loading"]),n("p",ne,[r(R,{to:"/auth/forgot-password"},{default:_(()=>[b(s(e.$t("page.login.forgot_password")),1)]),_:1})])],32)])}}});export{ge as default};
